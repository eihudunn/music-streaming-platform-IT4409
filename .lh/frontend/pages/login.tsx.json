{
    "sourceFile": "frontend/pages/login.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1717471446074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1717471446074,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { Icon } from '@iconify/react';\r\nimport TextInput from '@/components/auth/TextInput';\r\nimport PasswordInput from '@/components/auth/PasswordInput';\r\nimport Link from 'next/link';\r\nimport GoogleLogin from '@/components/auth/GoogleLogin';\r\nimport FacebookLogin from '@/components/auth/FacebookLogin';\r\nimport Head from 'next/head';\r\nimport { useEffect, useState } from 'react';\r\nimport { signIn, useSession } from 'next-auth/react';\r\nimport toast from 'react-hot-toast';\r\nimport GithubLogin from '@/components/auth/GIthubLogin';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nconst LoginComponent = () => {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [data, setData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  console.log(session);\r\n  useEffect(() => {\r\n    if (status === 'authenticated') {\r\n      router.push('/');\r\n    }\r\n  });\r\n  const handleLogin = async () => {\r\n    const { email, password } = data;\r\n  \r\n    // Check if all fields are filled\r\n    if (!email || !password) {\r\n      toast.error('Please fill in all fields');\r\n      return;\r\n    }\r\n  \r\n    // Check if email is valid\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!emailRegex.test(email)) {\r\n      toast.error('Please enter a valid email');\r\n      return;\r\n    }\r\n  \r\n    // If all checks pass, make the API call\r\n    signIn('credentials', {\r\n      redirect: false,\r\n      ...data,\r\n    })\r\n      .then((callback) => {\r\n        console.log(callback);\r\n        if (callback?.error) {\r\n          toast.error(callback?.error);\r\n        }\r\n  \r\n        if (callback?.ok && !callback?.error) {\r\n          toast.success('Logged in successfully');\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        toast.error(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Login - Hustify</title>\r\n      </Head>\r\n      <div className=\"w-screen h-screen flex flex-col items-center\">\r\n        <div className=\"logoRegion p-7 bg-black flex w-full\">\r\n          <Link href=\"/\">\r\n            <Icon icon=\"logos:spotify\" width=\"117\" />\r\n          </Link>\r\n        </div>\r\n        <div className=\"loginRegion w-full h-full items-start justify-center flex p-8\">\r\n          <div className=\"inputRegion py-10 md:w-[734px] w-full flex flex-col bg-black rounded-md\">\r\n            <div className=\"flex flex-col items-center justify-center\">\r\n              <div className=\"font-bold text-white text-4xl tracking-tighter my-12\">\r\n                {' '}\r\n                Log in to Hustify{' '}\r\n              </div>\r\n              <div className=\"w-full items-center justify-center flex flex-col\">\r\n                <GoogleLogin />\r\n                <FacebookLogin />\r\n                <GithubLogin />\r\n              </div>\r\n              <hr className=\"my-8 mx-14 w-full md:w-2/5 border-solid border-[#292929]\" />\r\n              <TextInput\r\n                label=\"Email or username\"\r\n                placeholder=\"Email or username\"\r\n                className=\" text-white text-xs mb-10 px-48\"\r\n                value={data.email}\r\n                onChange={(e) => setData({ ...data, email: e.target.value })}\r\n              />\r\n              <PasswordInput\r\n                label=\"Password\"\r\n                placeholder=\"Password\"\r\n                className=\"text-white text-xs px-48\"\r\n                value={data.password}\r\n                onChange={(e) => setData({ ...data, password: e.target.value })}\r\n              />\r\n              <div className=\"w-full flex items-center justify-center mb-4\">\r\n                <button\r\n                  onClick={handleLogin}\r\n                  className=\"w-full loginButton font-semibold p-3 px-10 mx-48 rounded-full text-xs text-black\"\r\n                >\r\n                  Log In\r\n                </button>\r\n              </div>\r\n              <div className=\"font-semibold text-xs text-white underline\">\r\n                Forgot your password?\r\n              </div>\r\n              <hr className=\"my-8 mx-14 w-full md:w-2/5 border-solid border-[#292929]\" />\r\n              <div className=\"my-6 flex flex-row \">\r\n                <div className=\"font-semibold text-xs text-gray-400\">\r\n                  Don&apos;t have an account?\r\n                </div>\r\n                <div className=\"text-white font-semibold text-xs ml-2 underline\">\r\n                  <Link href=\"/signup\">Sign up for Spotify</Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginComponent;\r\n"
        }
    ]
}