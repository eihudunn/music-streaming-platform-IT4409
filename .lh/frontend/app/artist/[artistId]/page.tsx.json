{
    "sourceFile": "frontend/app/artist/[artistId]/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1717474040399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1717474040399,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { Palette } from 'color-thief-react';\r\nimport Header from '@/components/Header';\r\nimport Image from 'next/image';\r\nimport { useParams } from 'next/navigation';\r\nimport React, { useEffect, useState } from 'react';\r\nimport PageBreak from '@/components/PageBreak';\r\nimport { UserDto } from '@/scheme/User';\r\nimport getUserById from '@/actions/user/getUserById';\r\nimport { LibraryType } from '@/const/libraryType';\r\nimport ArtistContent from '@/components/ArtistContent';\r\nimport getSongByUserId from '@/actions/song/getSongByUserId';\r\nimport { Song } from '@/scheme/Song';\r\n\r\nconst ArtistDetail = () => {\r\n  const params = useParams<{ artistId: string }>();\r\n  const artistId = params?.artistId;\r\n  const [data, setData] = useState<UserDto | null>(null);\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      try {\r\n        const user = await getUserById(artistId as string);\r\n        if (user) {\r\n          setData(user);\r\n        } else {\r\n          console.error('No user found');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error calling getUserById:', error);\r\n      }\r\n    };\r\n    if (artistId) {\r\n      getUser();\r\n    }\r\n  }, [artistId]);\r\n\r\n  const [songs, setSongs] = useState<Song[]>([]);\r\n\r\n  useEffect(() => {\r\n    const fetchSongs = async () => {\r\n      try {\r\n        const songs = await getSongByUserId(artistId as string);\r\n        if (songs) {\r\n          setSongs(songs);\r\n        } else {\r\n          console.error('No songs found for this user');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error calling getSongByUserId:', error);\r\n      }\r\n    };\r\n\r\n    if (artistId) {\r\n      fetchSongs();\r\n    }\r\n  }, [artistId]);\r\n\r\n  return (\r\n    <>\r\n      {data && (\r\n        <Palette\r\n          src={data?.avatarImg as string}\r\n          crossOrigin=\"anonymous\"\r\n          format=\"hex\"\r\n          colorCount={3}\r\n        >\r\n          {({ data: imgColor, loading }) => {\r\n            console.log(imgColor);\r\n            if (loading) return <div>Loading...</div>;\r\n            let color;\r\n            if (imgColor) {\r\n              color = imgColor[0] > '#202020' ? imgColor[0] : imgColor[1];\r\n            } else {\r\n              color = '#05614C';\r\n            }\r\n            return (\r\n              <>\r\n                <Header\r\n                  title={data?.username as string}\r\n                  isContentDetail={true}\r\n                  style={{\r\n                    backgroundImage: `linear-gradient(to bottom, ${color} var(--tw-gradient-from-position), #191b1d var(--tw-gradient-from-position) )`,\r\n                  }}\r\n                >\r\n                  <div className=\"mt-5\">\r\n                    <div className=\"flex flex-col md:flex-row items-center gap-x-5\">\r\n                      <div className=\"relative h-44 w-44 lg:h-60 lg:w-60\">\r\n                        <Image\r\n                          fill\r\n                          sizes=\"240\"\r\n                          src={\r\n                            data?.avatarImg\r\n                              ? (data?.avatarImg as string)\r\n                              : '/images/default.png'\r\n                          }\r\n                          alt={data?.username as string}\r\n                          className=\"object-cover\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex flex-col gap-y-2 mt-4 md:mt-0\">\r\n                        <p className=\"hidden md:block font-semibold text-lg\">\r\n                          Verified Artist\r\n                        </p>\r\n                        <h1 className=\"text-white text-4xl sm:text-5xl lg:text-7xl font-extrabold\">\r\n                          {data?.username}\r\n                        </h1>\r\n                        <div className=\"flex items-center gap-x-2\">\r\n                          <p className=\"text-white\"></p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Header>\r\n                <PageBreak\r\n                  type={LibraryType.Artist}\r\n                  id={artistId}\r\n                  songs={songs}\r\n                />\r\n                <div className=\"\">\r\n                  <h1 className=\"text-2xl font-bold mx-4\">Popular</h1>\r\n                  <ArtistContent songs={songs} limit />\r\n                </div>\r\n              </>\r\n            );\r\n          }}\r\n        </Palette>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ArtistDetail;\r\n"
        }
    ]
}