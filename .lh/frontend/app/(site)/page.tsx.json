{
    "sourceFile": "frontend/app/(site)/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1717478989831,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1717478989831,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport Header from '@/components/Header';\r\nimport ListItem from '@/components/ListItem';\r\nimport PageContent from './components/PageContent';\r\nimport getSongs from '@/actions/song/getSongs';\r\nimport { useSession } from 'next-auth/react';\r\nimport getSuggestion from '@/actions/song/getSuggestion';\r\nimport { useEffect, useState } from 'react';\r\nimport { Song } from '@/scheme/Song';\r\n\r\nexport interface SuggestionData {\r\n  MostPopularTracks: Song[];\r\n  HotTracks: Song[];\r\n  artistFollowedTracks: Song[];\r\n  favouriteGenreTracks: Song[];\r\n}\r\n\r\nexport default function Home() {\r\n  const [songs, setSongs] = useState<Song[]>([]);\r\n  const [suggestions, setSuggestions] = useState<SuggestionData>(\r\n    {} as SuggestionData,\r\n  );\r\n  const { data: session } = useSession();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const songsData = await getSongs();\r\n      setSongs(songsData);\r\n\r\n      if (session?.user?._doc._id) {\r\n        const suggestionData = await getSuggestion(session.user._doc._id);\r\n        setSuggestions(suggestionData);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [session]);\r\n\r\n  console.log('p', suggestions?.MostPopularTracks);\r\n  console.log('hot', suggestions?.HotTracks);\r\n  console.log('fl', suggestions?.artistFollowedTracks);\r\n  console.log('fav', suggestions?.favouriteGenreTracks);\r\n\r\n  return (\r\n    <div className=\"bg-neutral-900 rounded-lg h-full w-full overflow-hidden scrollbar-webkit overflow-y-auto\">\r\n      <Header\r\n        style={{\r\n          backgroundImage: `linear-gradient(to bottom, #10b981 var(--tw-gradient-from-position), rgb(16 185 129 / 0) var(--tw-gradient-from-position) )`,\r\n        }}\r\n      >\r\n        <div className=\"mb-2\">\r\n          <h1 className=\"text-white text-3xl font-semibold\">Welcome back</h1>\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3 mt-4\">\r\n            {/* TODO: add get fav song and play immediate */}\r\n            <ListItem\r\n              image=\"/images/liked.png\"\r\n              name=\"Liked Songs\"\r\n              href=\"liked\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Header>\r\n      <div className=\"mt-2 mb-7 px-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h1 className=\"text-white text-2xl font-semibold\">Newest Songs</h1>\r\n        </div>\r\n        <div>\r\n          <PageContent songs={songs} />\r\n        </div>\r\n        {suggestions?.MostPopularTracks?.length > 0 && (\r\n          <>\r\n            <div className=\"flex justify-between items-center\">\r\n              <h1 className=\"text-white text-2xl font-semibold\">\r\n                Most popular\r\n              </h1>\r\n            </div>\r\n            <div>\r\n              <PageContent songs={suggestions?.MostPopularTracks} />\r\n            </div>\r\n          </>\r\n        )}\r\n        {suggestions?.HotTracks?.length > 0 && (\r\n          <>\r\n            <div className=\"flex justify-between items-center\">\r\n              <h1 className=\"text-white text-2xl font-semibold\">Hot track</h1>\r\n            </div>\r\n            <div>\r\n              <PageContent songs={suggestions?.HotTracks} />\r\n            </div>\r\n          </>\r\n        )}\r\n        {suggestions?.artistFollowedTracks?.length > 0 && (\r\n          <>\r\n            <div className=\"flex justify-between items-center\">\r\n              <h1 className=\"text-white text-2xl font-semibold\">\r\n                Artist followed\r\n              </h1>\r\n            </div>\r\n            <div>\r\n              <PageContent songs={suggestions?.artistFollowedTracks} />\r\n            </div>\r\n          </>\r\n        )}\r\n        \r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}